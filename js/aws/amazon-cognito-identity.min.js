!function webpackUniversalModuleDefinition(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("aws-sdk/global"),require("aws-sdk/clients/cognitoidentityserviceprovider")):"function"==typeof define&&define.amd?define(["aws-sdk/global","aws-sdk/clients/cognitoidentityserviceprovider"],factory):"object"==typeof exports?exports.AmazonCognitoIdentity=factory(require("aws-sdk/global"),require("aws-sdk/clients/cognitoidentityserviceprovider")):root.AmazonCognitoIdentity=factory(root.AWSCognito,root.AWSCognito.CognitoIdentityServiceProvider)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_13__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _src=__webpack_require__(17);Object.keys(_src).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _src[key]}})});var _cognitoidentityserviceprovider,_cognitoidentityserviceprovider2=_interopRequireDefault(__webpack_require__(13)),enhancements=_interopRequireWildcard(_src);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.keys(enhancements).forEach(function(key){_cognitoidentityserviceprovider2.default[key]=enhancements[key]})},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _global=__webpack_require__(1),_BigInteger,_BigInteger2=_interopRequireDefault(__webpack_require__(3));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var initN="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",newPasswordRequiredChallengeUserAttributePrefix="userAttributes.",AuthenticationHelper=function(){function AuthenticationHelper(PoolName){_classCallCheck(this,AuthenticationHelper),this.N=new _BigInteger2.default(initN,16),this.g=new _BigInteger2.default("2",16),this.k=new _BigInteger2.default(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=new _global.util.Buffer("Caldera Derived Key","utf8"),this.poolName=PoolName}return AuthenticationHelper.prototype.getSmallAValue=function getSmallAValue(){return this.smallAValue},AuthenticationHelper.prototype.getLargeAValue=function getLargeAValue(callback){var _this=this;this.largeAValue?callback(null,this.largeAValue):this.calculateA(this.smallAValue,function(err,largeAValue){err&&callback(err,null),_this.largeAValue=largeAValue,callback(null,_this.largeAValue)})},AuthenticationHelper.prototype.generateRandomSmallA=function generateRandomSmallA(){var hexRandom=_global.util.crypto.lib.randomBytes(128).toString("hex"),randomBigInt,smallABigInt;return new _BigInteger2.default(hexRandom,16).mod(this.N)},AuthenticationHelper.prototype.generateRandomString=function generateRandomString(){return _global.util.crypto.lib.randomBytes(40).toString("base64")},AuthenticationHelper.prototype.getRandomPassword=function getRandomPassword(){return this.randomPassword},AuthenticationHelper.prototype.getSaltDevices=function getSaltDevices(){return this.SaltToHashDevices},AuthenticationHelper.prototype.getVerifierDevices=function getVerifierDevices(){return this.verifierDevices},AuthenticationHelper.prototype.generateHashDevice=function generateHashDevice(deviceGroupKey,username,callback){var _this2=this;this.randomPassword=this.generateRandomString();var combinedString=""+deviceGroupKey+username+":"+this.randomPassword,hashedString=this.hash(combinedString),hexRandom=_global.util.crypto.lib.randomBytes(16).toString("hex");this.SaltToHashDevices=this.padHex(new _BigInteger2.default(hexRandom,16)),this.g.modPow(new _BigInteger2.default(this.hexHash(this.SaltToHashDevices+hashedString),16),this.N,function(err,verifierDevicesNotPadded){err&&callback(err,null),_this2.verifierDevices=_this2.padHex(verifierDevicesNotPadded),callback(null,null)})},AuthenticationHelper.prototype.calculateA=function calculateA(a,callback){var _this3=this;this.g.modPow(a,this.N,function(err,A){err&&callback(err,null),A.mod(_this3.N).equals(_BigInteger2.default.ZERO)&&callback(new Error("Illegal paramater. A mod N cannot be 0."),null),callback(null,A)})},AuthenticationHelper.prototype.calculateU=function calculateU(A,B){var finalU;return this.UHexHash=this.hexHash(this.padHex(A)+this.padHex(B)),new _BigInteger2.default(this.UHexHash,16)},AuthenticationHelper.prototype.hash=function hash(buf){var hashHex=_global.util.crypto.sha256(buf,"hex");return new Array(64-hashHex.length).join("0")+hashHex},AuthenticationHelper.prototype.hexHash=function hexHash(hexStr){return this.hash(new _global.util.Buffer(hexStr,"hex"))},AuthenticationHelper.prototype.computehkdf=function computehkdf(ikm,salt){var prk=_global.util.crypto.hmac(salt,ikm,"buffer","sha256"),infoBitsUpdate=_global.util.buffer.concat([this.infoBits,new _global.util.Buffer(String.fromCharCode(1),"utf8")]),hmac;return _global.util.crypto.hmac(prk,infoBitsUpdate,"buffer","sha256").slice(0,16)},AuthenticationHelper.prototype.getPasswordAuthenticationKey=function getPasswordAuthenticationKey(username,password,serverBValue,salt,callback){var _this4=this;if(serverBValue.mod(this.N).equals(_BigInteger2.default.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,serverBValue),this.UValue.equals(_BigInteger2.default.ZERO))throw new Error("U cannot be zero.");var usernamePassword=""+this.poolName+username+":"+password,usernamePasswordHash=this.hash(usernamePassword),xValue=new _BigInteger2.default(this.hexHash(this.padHex(salt)+usernamePasswordHash),16);this.calculateS(xValue,serverBValue,function(err,sValue){err&&callback(err,null);var hkdf=_this4.computehkdf(new _global.util.Buffer(_this4.padHex(sValue),"hex"),new _global.util.Buffer(_this4.padHex(_this4.UValue.toString(16)),"hex"));callback(null,hkdf)})},AuthenticationHelper.prototype.calculateS=function calculateS(xValue,serverBValue,callback){var _this5=this;this.g.modPow(xValue,this.N,function(err,gModPowXN){var intValue2;err&&callback(err,null),serverBValue.subtract(_this5.k.multiply(gModPowXN)).modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)),_this5.N,function(err2,result){err2&&callback(err2,null),callback(null,result.mod(_this5.N))})})},AuthenticationHelper.prototype.getNewPasswordRequiredChallengeUserAttributePrefix=function getNewPasswordRequiredChallengeUserAttributePrefix(){return"userAttributes."},AuthenticationHelper.prototype.padHex=function padHex(bigInt){var hashStr=bigInt.toString(16);return hashStr.length%2==1?hashStr="0"+hashStr:-1!=="89ABCDEFabcdef".indexOf(hashStr[0])&&(hashStr="00"+hashStr),hashStr},AuthenticationHelper}();exports.default=AuthenticationHelper},function(module,exports){"use strict";function BigInteger(a,b){null!=a&&this.fromString(a,b)}function nbi(){return new BigInteger(null)}var dbits;exports.__esModule=!0,exports.default=BigInteger;var canary=0xdeadbeefcafe,j_lm=!0;function am1(i,x,w,j,c,n){for(;--n>=0;){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864),w[j++]=67108863&v}return c}function am2(i,x,w,j,c,n){for(var xl=32767&x,xh=x>>15;--n>=0;){var l=32767&this[i],h=this[i++]>>15,m=xh*l+h*xl;c=((l=xl*l+((32767&m)<<15)+w[j]+(1073741823&c))>>>30)+(m>>>15)+xh*h+(c>>>30),w[j++]=1073741823&l}return c}function am3(i,x,w,j,c,n){for(var xl=16383&x,xh=x>>14;--n>=0;){var l=16383&this[i],h=this[i++]>>14,m=xh*l+h*xl;c=((l=xl*l+((16383&m)<<14)+w[j]+c)>>28)+(m>>14)+xh*h,w[j++]=268435455&l}return c}var inBrowser="undefined"!=typeof navigator;inBrowser&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):inBrowser&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,52),BigInteger.prototype.F1=52-dbits,BigInteger.prototype.F2=2*dbits-52;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return null==c?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t,r.s=this.s}function bnpFromInt(x){this.t=1,this.s=x<0?-1:0,x>0?this[0]=x:x<-1?this[0]=x+this.DV:this.t=0}function nbv(i){var r=nbi();return r.fromInt(i),r}function bnpFromString(s,b){var k;if(16==b)k=4;else if(8==b)k=3;else if(2==b)k=1;else if(32==b)k=5;else{if(4!=b)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");k=2}this.t=0,this.s=0;for(var i=s.length,mi=!1,sh=0;--i>=0;){var x=intAt(s,i);x<0?"-"==s.charAt(i)&&(mi=!0):(mi=!1,0==sh?this[this.t++]=x:sh+k>this.DB?(this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh,this[this.t++]=x>>this.DB-sh):this[this.t-1]|=x<<sh,(sh+=k)>=this.DB&&(sh-=this.DB))}this.clamp(),mi&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t}function bnToString(b){if(this.s<0)return"-"+this.negate().toString();var k;if(16==b)k=4;else if(8==b)k=3;else if(2==b)k=1;else if(32==b)k=5;else{if(4!=b)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");k=2}var km=(1<<k)-1,d,m=!1,r="",i=this.t,p=this.DB-i*this.DB%k;if(i-- >0)for(p<this.DB&&(d=this[i]>>p)>0&&(m=!0,r=int2char(d));i>=0;)p<k?(d=(this[i]&(1<<p)-1)<<k-p,d|=this[--i]>>(p+=this.DB-k)):(d=this[i]>>(p-=k)&km,p<=0&&(p+=this.DB,--i)),d>0&&(m=!0),m&&(r+=int2char(d));return m?r:"0"}function bnNegate(){var r=nbi();return BigInteger.ZERO.subTo(this,r),r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(0!=r)return r;var i=this.t;if(0!=(r=i-a.t))return this.s<0?-r:r;for(;--i>=0;)if(0!=(r=this[i]-a[i]))return r;return 0}function nbits(x){var r=1,t;return 0!=(t=x>>>16)&&(x=t,r+=16),0!=(t=x>>8)&&(x=t,r+=8),0!=(t=x>>4)&&(x=t,r+=4),0!=(t=x>>2)&&(x=t,r+=2),0!=(t=x>>1)&&(x=t,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n,r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0),r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB,cbs=this.DB-bs,bm=(1<<cbs)-1,ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i)r[i+ds+1]=this[i]>>cbs|c,c=(this[i]&bm)<<bs;for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c,r.t=this.t+ds+1,r.s=this.s,r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t)r.t=0;else{var bs=n%this.DB,cbs=this.DB-bs,bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i)r[i-ds-1]|=(this[i]&bm)<<cbs,r[i-ds]=this[i]>>bs;bs>0&&(r[this.t-ds-1]|=(this.s&bm)<<cbs),r.t=this.t-ds,r.clamp()}}function bnpSubTo(a,r){for(var i=0,c=0,m=Math.min(a.t,this.t);i<m;)c+=this[i]-a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c-=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c-=a[i],r[i++]=c&this.DM,c>>=this.DB;c-=a.s}r.s=c<0?-1:0,c<-1?r[i++]=this.DV+c:c>0&&(r[i++]=c),r.t=i,r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs(),i=x.t;for(r.t=i+y.t;--i>=0;)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0,r.clamp(),this.s!=a.s&&BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){for(var x=this.abs(),i=r.t=2*x.t;--i>=0;)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);(r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV&&(r[i+x.t]-=x.DV,r[i+x.t+1]=1)}r.t>0&&(r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)),r.s=0,r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(!(pm.t<=0)){var pt=this.abs();if(pt.t<pm.t)return null!=q&&q.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var y=nbi(),ts=this.s,ms=m.s,nsh=this.DB-nbits(pm[pm.t-1]);nsh>0?(pm.lShiftTo(nsh,y),pt.lShiftTo(nsh,r)):(pm.copyTo(y),pt.copyTo(r));var ys=y.t,y0=y[ys-1];if(0!=y0){var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0),d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2,i=r.t,j=i-ys,t=null==q?nbi():q;for(y.dlShiftTo(j,t),r.compareTo(t)>=0&&(r[r.t++]=1,r.subTo(t,r)),BigInteger.ONE.dlShiftTo(ys,t),t.subTo(y,y);y.t<ys;)y[y.t++]=0;for(;--j>=0;){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd)for(y.dlShiftTo(j,t),r.subTo(t,r);r[i]<--qd;)r.subTo(t,r)}null!=q&&(r.drShiftTo(ys,q),ts!=ms&&BigInteger.ZERO.subTo(q,q)),r.t=ys,r.clamp(),nsh>0&&r.rShiftTo(nsh,r),ts<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(a){var r=nbi();return this.abs().divRemTo(a,null,r),this.s<0&&r.compareTo(BigInteger.ZERO)>0&&a.subTo(r,r),r}function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if(0==(1&x))return 0;var y=3&x;return(y=(y=(y=(y=y*(2-(15&x)*y)&15)*(2-(255&x)*y)&255)*(2-((65535&x)*y&65535))&65535)*(2-x*y%this.DV)%this.DV)>0?this.DV-y:-y}function bnEquals(a){return 0==this.compareTo(a)}function bnpAddTo(a,r){for(var i=0,c=0,m=Math.min(a.t,this.t);i<m;)c+=this[i]+a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c+=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c+=a[i],r[i++]=c&this.DM,c>>=this.DB;c+=a.s}r.s=c<0?-1:0,c>0?r[i++]=c:c<-1&&(r[i++]=this.DV+c),r.t=i,r.clamp()}function bnAdd(a){var r=nbi();return this.addTo(a,r),r}function bnSubtract(a){var r=nbi();return this.subTo(a,r),r}function bnMultiply(a){var r=nbi();return this.multiplyTo(a,r),r}function bnDivide(a){var r=nbi();return this.divRemTo(a,r,null),r}function Montgomery(m){this.m=m,this.mp=m.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<m.DB-15)-1,this.mt2=2*m.t}function montConvert(x){var r=nbi();return x.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),x.s<0&&r.compareTo(BigInteger.ZERO)>0&&this.m.subTo(r,r),r}function montRevert(x){var r=nbi();return x.copyTo(r),this.reduce(r),r}function montReduce(x){for(;x.t<=this.mt2;)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=32767&x[i],u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;for(x[j=i+this.m.t]+=this.m.am(0,u0,x,i,0,this.m.t);x[j]>=x.DV;)x[j]-=x.DV,x[++j]++}x.clamp(),x.drShiftTo(this.m.t,x),x.compareTo(this.m)>=0&&x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r),this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r),this.reduce(r)}function bnModPow(e,m,callback){var i=e.bitLength(),k,r=nbv(1),z=new Montgomery(m);if(i<=0)return r;k=i<18?1:i<48?3:i<144?4:i<768?5:6;var g=new Array,n=3,k1=k-1,km=(1<<k)-1;if(g[1]=z.convert(this),k>1){var g2=nbi();for(z.sqrTo(g[1],g2);n<=km;)g[n]=nbi(),z.mulTo(g2,g[n-2],g[n]),n+=2}var j=e.t-1,w,is1=!0,r2=nbi(),t;for(i=nbits(e[j])-1;j>=0;){for(i>=k1?w=e[j]>>i-k1&km:(w=(e[j]&(1<<i+1)-1)<<k1-i,j>0&&(w|=e[j-1]>>this.DB+i-k1)),n=k;0==(1&w);)w>>=1,--n;if((i-=n)<0&&(i+=this.DB,--j),is1)g[w].copyTo(r),is1=!1;else{for(;n>1;)z.sqrTo(r,r2),z.sqrTo(r2,r),n-=2;n>0?z.sqrTo(r,r2):(t=r,r=r2,r2=t),z.mulTo(r2,g[w],r)}for(;j>=0&&0==(e[j]&1<<i);)z.sqrTo(r,r2),t=r,r=r2,r2=t,--i<0&&(i=this.DB-1,--j)}var result=z.revert(r);return callback(null,result),result}Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.modPow=bnModPow,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1)},function(module,exports,__webpack_require__){"use strict";var _CognitoJwtToken2,_CognitoJwtToken3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var CognitoAccessToken=function(_CognitoJwtToken){function CognitoAccessToken(){var _ref,AccessToken=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).AccessToken;return _classCallCheck(this,CognitoAccessToken),_possibleConstructorReturn(this,_CognitoJwtToken.call(this,AccessToken||""))}return _inherits(CognitoAccessToken,_CognitoJwtToken),CognitoAccessToken}(_interopRequireDefault(__webpack_require__(6)).default);exports.default=CognitoAccessToken},function(module,exports,__webpack_require__){"use strict";var _CognitoJwtToken2,_CognitoJwtToken3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var CognitoIdToken=function(_CognitoJwtToken){function CognitoIdToken(){var _ref,IdToken=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).IdToken;return _classCallCheck(this,CognitoIdToken),_possibleConstructorReturn(this,_CognitoJwtToken.call(this,IdToken||""))}return _inherits(CognitoIdToken,_CognitoJwtToken),CognitoIdToken}(_interopRequireDefault(__webpack_require__(6)).default);exports.default=CognitoIdToken},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _global=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CognitoJwtToken=function(){function CognitoJwtToken(token){_classCallCheck(this,CognitoJwtToken),this.jwtToken=token||"",this.payload=this.decodePayload()}return CognitoJwtToken.prototype.getJwtToken=function getJwtToken(){return this.jwtToken},CognitoJwtToken.prototype.getExpiration=function getExpiration(){return this.payload.exp},CognitoJwtToken.prototype.getIssuedAt=function getIssuedAt(){return this.payload.iat},CognitoJwtToken.prototype.decodePayload=function decodePayload(){var payload=this.jwtToken.split(".")[1];try{return JSON.parse(_global.util.base64.decode(payload).toString("utf8"))}catch(err){return{}}},CognitoJwtToken}();exports.default=CognitoJwtToken},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var CognitoRefreshToken=function(){function CognitoRefreshToken(){var _ref,RefreshToken=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).RefreshToken;_classCallCheck(this,CognitoRefreshToken),this.token=RefreshToken||""}return CognitoRefreshToken.prototype.getToken=function getToken(){return this.token},CognitoRefreshToken}();exports.default=CognitoRefreshToken},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _global=__webpack_require__(1),_BigInteger,_BigInteger2=_interopRequireDefault(__webpack_require__(3)),_AuthenticationHelper,_AuthenticationHelper2=_interopRequireDefault(__webpack_require__(2)),_CognitoAccessToken,_CognitoAccessToken2=_interopRequireDefault(__webpack_require__(4)),_CognitoIdToken,_CognitoIdToken2=_interopRequireDefault(__webpack_require__(5)),_CognitoRefreshToken,_CognitoRefreshToken2=_interopRequireDefault(__webpack_require__(7)),_CognitoUserSession,_CognitoUserSession2=_interopRequireDefault(__webpack_require__(10)),_DateHelper,_DateHelper2=_interopRequireDefault(__webpack_require__(11)),_CognitoUserAttribute,_CognitoUserAttribute2=_interopRequireDefault(__webpack_require__(9)),_StorageHelper,_StorageHelper2=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CognitoUser=function(){function CognitoUser(data){if(_classCallCheck(this,CognitoUser),null==data||null==data.Username||null==data.Pool)throw new Error("Username and pool information are required.");this.username=data.Username||"",this.pool=data.Pool,this.Session=null,this.client=data.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=data.Storage||(new _StorageHelper2.default).getStorage()}return CognitoUser.prototype.setSignInUserSession=function setSignInUserSession(signInUserSession){this.clearCachedTokens(),this.signInUserSession=signInUserSession,this.cacheTokens()},CognitoUser.prototype.getSignInUserSession=function getSignInUserSession(){return this.signInUserSession},CognitoUser.prototype.getUsername=function getUsername(){return this.username},CognitoUser.prototype.getAuthenticationFlowType=function getAuthenticationFlowType(){return this.authenticationFlowType},CognitoUser.prototype.setAuthenticationFlowType=function setAuthenticationFlowType(authenticationFlowType){this.authenticationFlowType=authenticationFlowType},CognitoUser.prototype.initiateAuth=function initiateAuth(authDetails,callback){var _this=this,authParameters=authDetails.getAuthParameters();authParameters.USERNAME=this.username;var jsonReq={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:authParameters,ClientMetadata:authDetails.getValidationData()};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("initiateAuth",jsonReq,function(err,data){if(err)return callback.onFailure(err);var challengeName=data.ChallengeName,challengeParameters=data.ChallengeParameters;return"CUSTOM_CHALLENGE"===challengeName?(_this.Session=data.Session,callback.customChallenge(challengeParameters)):(_this.signInUserSession=_this.getCognitoUserSession(data.AuthenticationResult),_this.cacheTokens(),callback.onSuccess(_this.signInUserSession))})},CognitoUser.prototype.authenticateUser=function authenticateUser(authDetails,callback){var _this2=this,authenticationHelper=new _AuthenticationHelper2.default(this.pool.getUserPoolId().split("_")[1]),dateHelper=new _DateHelper2.default,serverBValue=void 0,salt=void 0,authParameters={};null!=this.deviceKey&&(authParameters.DEVICE_KEY=this.deviceKey),authParameters.USERNAME=this.username,authenticationHelper.getLargeAValue(function(errOnAValue,aValue){errOnAValue&&callback.onFailure(errOnAValue),authParameters.SRP_A=aValue.toString(16),"CUSTOM_AUTH"===_this2.authenticationFlowType&&(authParameters.CHALLENGE_NAME="SRP_A");var jsonReq={AuthFlow:_this2.authenticationFlowType,ClientId:_this2.pool.getClientId(),AuthParameters:authParameters,ClientMetadata:authDetails.getValidationData()};_this2.getUserContextData(_this2.username)&&(jsonReq.UserContextData=_this2.getUserContextData(_this2.username)),_this2.client.makeUnauthenticatedRequest("initiateAuth",jsonReq,function(err,data){if(err)return callback.onFailure(err);var challengeParameters=data.ChallengeParameters;_this2.username=challengeParameters.USER_ID_FOR_SRP,serverBValue=new _BigInteger2.default(challengeParameters.SRP_B,16),salt=new _BigInteger2.default(challengeParameters.SALT,16),_this2.getCachedDeviceKeyAndPassword(),authenticationHelper.getPasswordAuthenticationKey(_this2.username,authDetails.getPassword(),serverBValue,salt,function(errOnHkdf,hkdf){errOnHkdf&&callback.onFailure(errOnHkdf);var dateNow=dateHelper.getNowString(),signatureString=_global.util.crypto.hmac(hkdf,_global.util.buffer.concat([new _global.util.Buffer(_this2.pool.getUserPoolId().split("_")[1],"utf8"),new _global.util.Buffer(_this2.username,"utf8"),new _global.util.Buffer(challengeParameters.SECRET_BLOCK,"base64"),new _global.util.Buffer(dateNow,"utf8")]),"base64","sha256"),challengeResponses={};challengeResponses.USERNAME=_this2.username,challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK=challengeParameters.SECRET_BLOCK,challengeResponses.TIMESTAMP=dateNow,challengeResponses.PASSWORD_CLAIM_SIGNATURE=signatureString,null!=_this2.deviceKey&&(challengeResponses.DEVICE_KEY=_this2.deviceKey);var respondToAuthChallenge=function respondToAuthChallenge(challenge,challengeCallback){return _this2.client.makeUnauthenticatedRequest("respondToAuthChallenge",challenge,function(errChallenge,dataChallenge){return errChallenge&&"ResourceNotFoundException"===errChallenge.code&&-1!==errChallenge.message.toLowerCase().indexOf("device")?(challengeResponses.DEVICE_KEY=null,_this2.deviceKey=null,_this2.randomPassword=null,_this2.deviceGroupKey=null,_this2.clearCachedDeviceKeyAndPassword(),respondToAuthChallenge(challenge,challengeCallback)):challengeCallback(errChallenge,dataChallenge)})},jsonReqResp={ChallengeName:"PASSWORD_VERIFIER",ClientId:_this2.pool.getClientId(),ChallengeResponses:challengeResponses,Session:data.Session};_this2.getUserContextData()&&(jsonReqResp.UserContextData=_this2.getUserContextData()),respondToAuthChallenge(jsonReqResp,function(errAuthenticate,dataAuthenticate){if(errAuthenticate)return callback.onFailure(errAuthenticate);var challengeName;if("NEW_PASSWORD_REQUIRED"===dataAuthenticate.ChallengeName){_this2.Session=dataAuthenticate.Session;var userAttributes=null,rawRequiredAttributes=null,requiredAttributes=[],userAttributesPrefix=authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();if(dataAuthenticate.ChallengeParameters&&(userAttributes=JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes),rawRequiredAttributes=JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes)),rawRequiredAttributes)for(var i=0;i<rawRequiredAttributes.length;i++)requiredAttributes[i]=rawRequiredAttributes[i].substr(userAttributesPrefix.length);return callback.newPasswordRequired(userAttributes,requiredAttributes)}return _this2.authenticateUserInternal(dataAuthenticate,authenticationHelper,callback)})})})})},CognitoUser.prototype.authenticateUserInternal=function authenticateUserInternal(dataAuthenticate,authenticationHelper,callback){var _this3=this,challengeName=dataAuthenticate.ChallengeName,challengeParameters=dataAuthenticate.ChallengeParameters;if("SMS_MFA"===challengeName)return this.Session=dataAuthenticate.Session,callback.mfaRequired(challengeName,challengeParameters);if("SELECT_MFA_TYPE"===challengeName)return this.Session=dataAuthenticate.Session,callback.selectMFAType(challengeName,challengeParameters);if("MFA_SETUP"===challengeName)return this.Session=dataAuthenticate.Session,callback.mfaSetup(challengeName,challengeParameters);if("SOFTWARE_TOKEN_MFA"===challengeName)return this.Session=dataAuthenticate.Session,callback.totpRequired(challengeName,challengeParameters);if("CUSTOM_CHALLENGE"===challengeName)return this.Session=dataAuthenticate.Session,callback.customChallenge(challengeParameters);if("DEVICE_SRP_AUTH"!==challengeName){this.signInUserSession=this.getCognitoUserSession(dataAuthenticate.AuthenticationResult),this.cacheTokens();var newDeviceMetadata=dataAuthenticate.AuthenticationResult.NewDeviceMetadata;if(null==newDeviceMetadata)return callback.onSuccess(this.signInUserSession);authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(errGenHash){if(errGenHash)return callback.onFailure(errGenHash);var deviceSecretVerifierConfig={Salt:new _global.util.Buffer(authenticationHelper.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:new _global.util.Buffer(authenticationHelper.getVerifierDevices(),"hex").toString("base64")};_this3.verifierDevices=deviceSecretVerifierConfig.PasswordVerifier,_this3.deviceGroupKey=newDeviceMetadata.DeviceGroupKey,_this3.randomPassword=authenticationHelper.getRandomPassword(),_this3.client.makeUnauthenticatedRequest("confirmDevice",{DeviceKey:newDeviceMetadata.DeviceKey,AccessToken:_this3.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:deviceSecretVerifierConfig,DeviceName:navigator.userAgent},function(errConfirm,dataConfirm){return errConfirm?callback.onFailure(errConfirm):(_this3.deviceKey=dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,_this3.cacheDeviceKeyAndPassword(),!0===dataConfirm.UserConfirmationNecessary?callback.onSuccess(_this3.signInUserSession,dataConfirm.UserConfirmationNecessary):callback.onSuccess(_this3.signInUserSession))})})}else this.getDeviceResponse(callback)},CognitoUser.prototype.completeNewPasswordChallenge=function completeNewPasswordChallenge(newPassword,requiredAttributeData,callback){var _this4=this;if(!newPassword)return callback.onFailure(new Error("New password is required."));var authenticationHelper=new _AuthenticationHelper2.default(this.pool.getUserPoolId().split("_")[1]),userAttributesPrefix=authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix(),finalUserAttributes={};requiredAttributeData&&Object.keys(requiredAttributeData).forEach(function(key){finalUserAttributes[userAttributesPrefix+key]=requiredAttributeData[key]}),finalUserAttributes.NEW_PASSWORD=newPassword,finalUserAttributes.USERNAME=this.username;var jsonReq={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:finalUserAttributes,Session:this.Session};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReq,function(errAuthenticate,dataAuthenticate){return errAuthenticate?callback.onFailure(errAuthenticate):_this4.authenticateUserInternal(dataAuthenticate,authenticationHelper,callback)})},CognitoUser.prototype.getDeviceResponse=function getDeviceResponse(callback){var _this5=this,authenticationHelper=new _AuthenticationHelper2.default(this.deviceGroupKey),dateHelper=new _DateHelper2.default,authParameters={};authParameters.USERNAME=this.username,authParameters.DEVICE_KEY=this.deviceKey,authenticationHelper.getLargeAValue(function(errAValue,aValue){errAValue&&callback.onFailure(errAValue),authParameters.SRP_A=aValue.toString(16);var jsonReq={ChallengeName:"DEVICE_SRP_AUTH",ClientId:_this5.pool.getClientId(),ChallengeResponses:authParameters};_this5.getUserContextData()&&(jsonReq.UserContextData=_this5.getUserContextData()),_this5.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReq,function(err,data){if(err)return callback.onFailure(err);var challengeParameters=data.ChallengeParameters,serverBValue=new _BigInteger2.default(challengeParameters.SRP_B,16),salt=new _BigInteger2.default(challengeParameters.SALT,16);authenticationHelper.getPasswordAuthenticationKey(_this5.deviceKey,_this5.randomPassword,serverBValue,salt,function(errHkdf,hkdf){if(errHkdf)return callback.onFailure(errHkdf);var dateNow=dateHelper.getNowString(),signatureString=_global.util.crypto.hmac(hkdf,_global.util.buffer.concat([new _global.util.Buffer(_this5.deviceGroupKey,"utf8"),new _global.util.Buffer(_this5.deviceKey,"utf8"),new _global.util.Buffer(challengeParameters.SECRET_BLOCK,"base64"),new _global.util.Buffer(dateNow,"utf8")]),"base64","sha256"),challengeResponses={};challengeResponses.USERNAME=_this5.username,challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK=challengeParameters.SECRET_BLOCK,challengeResponses.TIMESTAMP=dateNow,challengeResponses.PASSWORD_CLAIM_SIGNATURE=signatureString,challengeResponses.DEVICE_KEY=_this5.deviceKey;var jsonReqResp={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:_this5.pool.getClientId(),ChallengeResponses:challengeResponses,Session:data.Session};_this5.getUserContextData()&&(jsonReqResp.UserContextData=_this5.getUserContextData()),_this5.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReqResp,function(errAuthenticate,dataAuthenticate){return errAuthenticate?callback.onFailure(errAuthenticate):(_this5.signInUserSession=_this5.getCognitoUserSession(dataAuthenticate.AuthenticationResult),_this5.cacheTokens(),callback.onSuccess(_this5.signInUserSession))})})})})},CognitoUser.prototype.confirmRegistration=function confirmRegistration(confirmationCode,forceAliasCreation,callback){var jsonReq={ClientId:this.pool.getClientId(),ConfirmationCode:confirmationCode,Username:this.username,ForceAliasCreation:forceAliasCreation};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("confirmSignUp",jsonReq,function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.sendCustomChallengeAnswer=function sendCustomChallengeAnswer(answerChallenge,callback){var _this6=this,challengeResponses={};challengeResponses.USERNAME=this.username,challengeResponses.ANSWER=answerChallenge;var jsonReq={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:challengeResponses,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReq,function(err,data){return err?callback.onFailure(err):"CUSTOM_CHALLENGE"===data.ChallengeName?(_this6.Session=data.Session,callback.customChallenge(data.ChallengeParameters)):(_this6.signInUserSession=_this6.getCognitoUserSession(data.AuthenticationResult),_this6.cacheTokens(),callback.onSuccess(_this6.signInUserSession));var challengeName})},CognitoUser.prototype.sendMFACode=function sendMFACode(confirmationCode,callback,mfaType){var _this7=this,challengeResponses={};challengeResponses.USERNAME=this.username,challengeResponses.SMS_MFA_CODE=confirmationCode;var mfaTypeSelection=mfaType||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===mfaTypeSelection&&(challengeResponses.SOFTWARE_TOKEN_MFA_CODE=confirmationCode),null!=this.deviceKey&&(challengeResponses.DEVICE_KEY=this.deviceKey);var jsonReq={ChallengeName:mfaTypeSelection,ChallengeResponses:challengeResponses,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReq,function(err,dataAuthenticate){if(err)return callback.onFailure(err);var challengeName;if("DEVICE_SRP_AUTH"!==dataAuthenticate.ChallengeName){if(_this7.signInUserSession=_this7.getCognitoUserSession(dataAuthenticate.AuthenticationResult),_this7.cacheTokens(),null==dataAuthenticate.AuthenticationResult.NewDeviceMetadata)return callback.onSuccess(_this7.signInUserSession);var authenticationHelper=new _AuthenticationHelper2.default(_this7.pool.getUserPoolId().split("_")[1]);authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(errGenHash){if(errGenHash)return callback.onFailure(errGenHash);var deviceSecretVerifierConfig={Salt:new _global.util.Buffer(authenticationHelper.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:new _global.util.Buffer(authenticationHelper.getVerifierDevices(),"hex").toString("base64")};_this7.verifierDevices=deviceSecretVerifierConfig.PasswordVerifier,_this7.deviceGroupKey=dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,_this7.randomPassword=authenticationHelper.getRandomPassword(),_this7.client.makeUnauthenticatedRequest("confirmDevice",{DeviceKey:dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:_this7.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:deviceSecretVerifierConfig,DeviceName:navigator.userAgent},function(errConfirm,dataConfirm){return errConfirm?callback.onFailure(errConfirm):(_this7.deviceKey=dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,_this7.cacheDeviceKeyAndPassword(),!0===dataConfirm.UserConfirmationNecessary?callback.onSuccess(_this7.signInUserSession,dataConfirm.UserConfirmationNecessary):callback.onSuccess(_this7.signInUserSession))})})}else _this7.getDeviceResponse(callback)})},CognitoUser.prototype.changePassword=function changePassword(oldUserPassword,newUserPassword,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("changePassword",{PreviousPassword:oldUserPassword,ProposedPassword:newUserPassword,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.enableMFA=function enableMFA(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);var mfaOptions=[],mfaEnabled={DeliveryMedium:"SMS",AttributeName:"phone_number"};mfaOptions.push(mfaEnabled),this.client.makeUnauthenticatedRequest("setUserSettings",{MFAOptions:mfaOptions,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.setUserMfaPreference=function setUserMfaPreference(smsMfaSettings,softwareTokenMfaSettings,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("setUserMFAPreference",{SMSMfaSettings:smsMfaSettings,SoftwareTokenMfaSettings:softwareTokenMfaSettings,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.disableMFA=function disableMFA(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);var mfaOptions=[];this.client.makeUnauthenticatedRequest("setUserSettings",{MFAOptions:mfaOptions,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.deleteUser=function deleteUser(callback){var _this8=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("deleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback(err,null):(_this8.clearCachedTokens(),callback(null,"SUCCESS"))})},CognitoUser.prototype.updateAttributes=function updateAttributes(attributes,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("updateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:attributes},function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.getUserAttributes=function getUserAttributes(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("getUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err,userData){if(err)return callback(err,null);for(var attributeList=[],i=0;i<userData.UserAttributes.length;i++){var attribute={Name:userData.UserAttributes[i].Name,Value:userData.UserAttributes[i].Value},userAttribute=new _CognitoUserAttribute2.default(attribute);attributeList.push(userAttribute)}return callback(null,attributeList)})},CognitoUser.prototype.getMFAOptions=function getMFAOptions(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("getUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err,userData){return err?callback(err,null):callback(null,userData.MFAOptions)})},CognitoUser.prototype.deleteAttributes=function deleteAttributes(attributeList,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback(new Error("User is not authenticated"),null);this.client.makeUnauthenticatedRequest("deleteUserAttributes",{UserAttributeNames:attributeList,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback(err,null):callback(null,"SUCCESS")})},CognitoUser.prototype.resendConfirmationCode=function resendConfirmationCode(callback){var jsonReq={ClientId:this.pool.getClientId(),Username:this.username};this.client.makeUnauthenticatedRequest("resendConfirmationCode",jsonReq,function(err,result){return err?callback(err,null):callback(null,result)})},CognitoUser.prototype.getSession=function getSession(callback){if(null==this.username)return callback(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return callback(null,this.signInUserSession);var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,idTokenKey=keyPrefix+".idToken",accessTokenKey=keyPrefix+".accessToken",refreshTokenKey=keyPrefix+".refreshToken",clockDriftKey=keyPrefix+".clockDrift";if(this.storage.getItem(idTokenKey)){var idToken=new _CognitoIdToken2.default({IdToken:this.storage.getItem(idTokenKey)}),accessToken=new _CognitoAccessToken2.default({AccessToken:this.storage.getItem(accessTokenKey)}),refreshToken=new _CognitoRefreshToken2.default({RefreshToken:this.storage.getItem(refreshTokenKey)}),clockDrift,sessionData={IdToken:idToken,AccessToken:accessToken,RefreshToken:refreshToken,ClockDrift:parseInt(this.storage.getItem(clockDriftKey),0)||0},cachedSession=new _CognitoUserSession2.default(sessionData);if(cachedSession.isValid())return this.signInUserSession=cachedSession,callback(null,this.signInUserSession);if(null==refreshToken.getToken())return callback(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(refreshToken,callback)}else callback(new Error("Local storage is missing an ID Token, Please authenticate"),null)},CognitoUser.prototype.refreshSession=function refreshSession(refreshToken,callback){var _this9=this,authParameters={};authParameters.REFRESH_TOKEN=refreshToken.getToken();var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),lastUserKey=keyPrefix+".LastAuthUser";if(this.storage.getItem(lastUserKey)){this.username=this.storage.getItem(lastUserKey);var deviceKeyKey=keyPrefix+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(deviceKeyKey),authParameters.DEVICE_KEY=this.deviceKey}var jsonReq={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:authParameters};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("initiateAuth",jsonReq,function(err,authResult){if(err)return"NotAuthorizedException"===err.code&&_this9.clearCachedTokens(),callback(err,null);if(authResult){var authenticationResult=authResult.AuthenticationResult;return Object.prototype.hasOwnProperty.call(authenticationResult,"RefreshToken")||(authenticationResult.RefreshToken=refreshToken.getToken()),_this9.signInUserSession=_this9.getCognitoUserSession(authenticationResult),_this9.cacheTokens(),callback(null,_this9.signInUserSession)}})},CognitoUser.prototype.cacheTokens=function cacheTokens(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),idTokenKey=keyPrefix+"."+this.username+".idToken",accessTokenKey=keyPrefix+"."+this.username+".accessToken",refreshTokenKey=keyPrefix+"."+this.username+".refreshToken",clockDriftKey=keyPrefix+"."+this.username+".clockDrift",lastUserKey=keyPrefix+".LastAuthUser";this.storage.setItem(idTokenKey,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(accessTokenKey,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(refreshTokenKey,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(clockDriftKey,""+this.signInUserSession.getClockDrift()),this.storage.setItem(lastUserKey,this.username)},CognitoUser.prototype.cacheDeviceKeyAndPassword=function cacheDeviceKeyAndPassword(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,deviceKeyKey=keyPrefix+".deviceKey",randomPasswordKey=keyPrefix+".randomPasswordKey",deviceGroupKeyKey=keyPrefix+".deviceGroupKey";this.storage.setItem(deviceKeyKey,this.deviceKey),this.storage.setItem(randomPasswordKey,this.randomPassword),this.storage.setItem(deviceGroupKeyKey,this.deviceGroupKey)},CognitoUser.prototype.getCachedDeviceKeyAndPassword=function getCachedDeviceKeyAndPassword(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,deviceKeyKey=keyPrefix+".deviceKey",randomPasswordKey=keyPrefix+".randomPasswordKey",deviceGroupKeyKey=keyPrefix+".deviceGroupKey";this.storage.getItem(deviceKeyKey)&&(this.deviceKey=this.storage.getItem(deviceKeyKey),this.randomPassword=this.storage.getItem(randomPasswordKey),this.deviceGroupKey=this.storage.getItem(deviceGroupKeyKey))},CognitoUser.prototype.clearCachedDeviceKeyAndPassword=function clearCachedDeviceKeyAndPassword(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,deviceKeyKey=keyPrefix+".deviceKey",randomPasswordKey=keyPrefix+".randomPasswordKey",deviceGroupKeyKey=keyPrefix+".deviceGroupKey";this.storage.removeItem(deviceKeyKey),this.storage.removeItem(randomPasswordKey),this.storage.removeItem(deviceGroupKeyKey)},CognitoUser.prototype.clearCachedTokens=function clearCachedTokens(){var keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),idTokenKey=keyPrefix+"."+this.username+".idToken",accessTokenKey=keyPrefix+"."+this.username+".accessToken",refreshTokenKey=keyPrefix+"."+this.username+".refreshToken",lastUserKey=keyPrefix+".LastAuthUser";this.storage.removeItem(idTokenKey),this.storage.removeItem(accessTokenKey),this.storage.removeItem(refreshTokenKey),this.storage.removeItem(lastUserKey)},CognitoUser.prototype.getCognitoUserSession=function getCognitoUserSession(authResult){var idToken,accessToken,refreshToken,sessionData={IdToken:new _CognitoIdToken2.default(authResult),AccessToken:new _CognitoAccessToken2.default(authResult),RefreshToken:new _CognitoRefreshToken2.default(authResult)};return new _CognitoUserSession2.default(sessionData)},CognitoUser.prototype.forgotPassword=function forgotPassword(callback){var jsonReq={ClientId:this.pool.getClientId(),Username:this.username};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("forgotPassword",jsonReq,function(err,data){return err?callback.onFailure(err):"function"==typeof callback.inputVerificationCode?callback.inputVerificationCode(data):callback.onSuccess(data)})},CognitoUser.prototype.confirmPassword=function confirmPassword(confirmationCode,newPassword,callback){var jsonReq={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:confirmationCode,Password:newPassword};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("confirmForgotPassword",jsonReq,function(err){return err?callback.onFailure(err):callback.onSuccess()})},CognitoUser.prototype.getAttributeVerificationCode=function getAttributeVerificationCode(attributeName,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("getUserAttributeVerificationCode",{AttributeName:attributeName,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err,data){return err?callback.onFailure(err):"function"==typeof callback.inputVerificationCode?callback.inputVerificationCode(data):callback.onSuccess()})},CognitoUser.prototype.verifyAttribute=function verifyAttribute(attributeName,confirmationCode,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("verifyUserAttribute",{AttributeName:attributeName,Code:confirmationCode,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")})},CognitoUser.prototype.getDevice=function getDevice(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("getDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(err,data){return err?callback.onFailure(err):callback.onSuccess(data)})},CognitoUser.prototype.forgetSpecificDevice=function forgetSpecificDevice(deviceKey,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("forgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:deviceKey},function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")})},CognitoUser.prototype.forgetDevice=function forgetDevice(callback){var _this10=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:callback.onFailure,onSuccess:function onSuccess(result){return _this10.deviceKey=null,_this10.deviceGroupKey=null,_this10.randomPassword=null,_this10.clearCachedDeviceKeyAndPassword(),callback.onSuccess(result)}})},CognitoUser.prototype.setDeviceStatusRemembered=function setDeviceStatusRemembered(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("updateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")})},CognitoUser.prototype.setDeviceStatusNotRemembered=function setDeviceStatusNotRemembered(callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("updateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(err){return err?callback.onFailure(err):callback.onSuccess("SUCCESS")})},CognitoUser.prototype.listDevices=function listDevices(limit,paginationToken,callback){if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("listDevices",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:limit,PaginationToken:paginationToken},function(err,data){return err?callback.onFailure(err):callback.onSuccess(data)})},CognitoUser.prototype.globalSignOut=function globalSignOut(callback){var _this11=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return callback.onFailure(new Error("User is not authenticated"));this.client.makeUnauthenticatedRequest("globalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err){return err?callback.onFailure(err):(_this11.clearCachedTokens(),callback.onSuccess("SUCCESS"))})},CognitoUser.prototype.signOut=function signOut(){this.signInUserSession=null,this.clearCachedTokens()},CognitoUser.prototype.sendMFASelectionAnswer=function sendMFASelectionAnswer(answerChallenge,callback){var _this12=this,challengeResponses={};challengeResponses.USERNAME=this.username,challengeResponses.ANSWER=answerChallenge;var jsonReq={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:challengeResponses,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(jsonReq.UserContextData=this.getUserContextData()),this.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReq,function(err,data){return err?callback.onFailure(err):(_this12.Session=data.Session,"SMS_MFA"===answerChallenge?callback.mfaRequired(data.challengeName,data.challengeParameters):"SOFTWARE_TOKEN_MFA"===answerChallenge?callback.totpRequired(data.challengeName,data.challengeParameters):void 0)})},CognitoUser.prototype.getUserContextData=function getUserContextData(){var pool;return this.pool.getUserContextData(this.username)},CognitoUser.prototype.associateSoftwareToken=function associateSoftwareToken(callback){var _this13=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.makeUnauthenticatedRequest("associateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(err,data){return err?callback.onFailure(err):callback.associateSecretCode(data.SecretCode)}):this.client.makeUnauthenticatedRequest("associateSoftwareToken",{Session:this.Session},function(err,data){return err?callback.onFailure(err):(_this13.Session=data.Session,callback.associateSecretCode(data.SecretCode))})},CognitoUser.prototype.verifySoftwareToken=function verifySoftwareToken(totpCode,friendlyDeviceName,callback){var _this14=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.makeUnauthenticatedRequest("verifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:totpCode,FriendlyDeviceName:friendlyDeviceName},function(err,data){return err?callback.onFailure(err):callback(null,data)}):this.client.makeUnauthenticatedRequest("verifySoftwareToken",{Session:this.Session,UserCode:totpCode,FriendlyDeviceName:friendlyDeviceName},function(err,data){if(err)return callback.onFailure(err);_this14.Session=data.Session;var challengeResponses={};challengeResponses.USERNAME=_this14.username;var jsonReq={ChallengeName:"MFA_SETUP",ClientId:_this14.pool.getClientId(),ChallengeResponses:challengeResponses,Session:_this14.Session};_this14.getUserContextData()&&(jsonReq.UserContextData=_this14.getUserContextData()),_this14.client.makeUnauthenticatedRequest("respondToAuthChallenge",jsonReq,function(errRespond,dataRespond){return errRespond?callback.onFailure(errRespond):(_this14.signInUserSession=_this14.getCognitoUserSession(dataRespond.AuthenticationResult),_this14.cacheTokens(),callback.onSuccess(_this14.signInUserSession))})})},CognitoUser}();exports.default=CognitoUser},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var CognitoUserAttribute=function(){function CognitoUserAttribute(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Name=_ref.Name,Value=_ref.Value;_classCallCheck(this,CognitoUserAttribute),this.Name=Name||"",this.Value=Value||""}return CognitoUserAttribute.prototype.getValue=function getValue(){return this.Value},CognitoUserAttribute.prototype.setValue=function setValue(value){return this.Value=value,this},CognitoUserAttribute.prototype.getName=function getName(){return this.Name},CognitoUserAttribute.prototype.setName=function setName(name){return this.Name=name,this},CognitoUserAttribute.prototype.toString=function toString(){return JSON.stringify(this)},CognitoUserAttribute.prototype.toJSON=function toJSON(){return{Name:this.Name,Value:this.Value}},CognitoUserAttribute}();exports.default=CognitoUserAttribute},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var CognitoUserSession=function(){function CognitoUserSession(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},IdToken=_ref.IdToken,RefreshToken=_ref.RefreshToken,AccessToken=_ref.AccessToken,ClockDrift=_ref.ClockDrift;if(_classCallCheck(this,CognitoUserSession),null==AccessToken||null==IdToken)throw new Error("Id token and Access Token must be present.");this.idToken=IdToken,this.refreshToken=RefreshToken,this.accessToken=AccessToken,this.clockDrift=void 0===ClockDrift?this.calculateClockDrift():ClockDrift}return CognitoUserSession.prototype.getIdToken=function getIdToken(){return this.idToken},CognitoUserSession.prototype.getRefreshToken=function getRefreshToken(){return this.refreshToken},CognitoUserSession.prototype.getAccessToken=function getAccessToken(){return this.accessToken},CognitoUserSession.prototype.getClockDrift=function getClockDrift(){return this.clockDrift},CognitoUserSession.prototype.calculateClockDrift=function calculateClockDrift(){var now,iat;return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},CognitoUserSession.prototype.isValid=function isValid(){var now,adjusted=Math.floor(new Date/1e3)-this.clockDrift;return adjusted<this.accessToken.getExpiration()&&adjusted<this.idToken.getExpiration()},CognitoUserSession}();exports.default=CognitoUserSession},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DateHelper=function(){function DateHelper(){_classCallCheck(this,DateHelper)}return DateHelper.prototype.getNowString=function getNowString(){var now=new Date,weekDay=weekNames[now.getUTCDay()],month=monthNames[now.getUTCMonth()],day=now.getUTCDate(),hours=now.getUTCHours();hours<10&&(hours="0"+hours);var minutes=now.getUTCMinutes();minutes<10&&(minutes="0"+minutes);var seconds=now.getUTCSeconds(),year,dateNow;return seconds<10&&(seconds="0"+seconds),weekDay+" "+month+" "+day+" "+hours+":"+minutes+":"+seconds+" UTC "+now.getUTCFullYear()},DateHelper}();exports.default=DateHelper},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var dataMemory={},MemoryStorage=function(){function MemoryStorage(){_classCallCheck(this,MemoryStorage)}return MemoryStorage.setItem=function setItem(key,value){return dataMemory[key]=value,dataMemory[key]},MemoryStorage.getItem=function getItem(key){return Object.prototype.hasOwnProperty.call(dataMemory,key)?dataMemory[key]:void 0},MemoryStorage.removeItem=function removeItem(key){return delete dataMemory[key]},MemoryStorage.clear=function clear(){return dataMemory={}},MemoryStorage}(),StorageHelper=function(){function StorageHelper(){_classCallCheck(this,StorageHelper);try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(exception){this.storageWindow=MemoryStorage}}return StorageHelper.prototype.getStorage=function getStorage(){return this.storageWindow},StorageHelper}();exports.default=StorageHelper},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_13__},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var AuthenticationDetails=function(){function AuthenticationDetails(data){_classCallCheck(this,AuthenticationDetails);var _ref=data||{},ValidationData=_ref.ValidationData,Username=_ref.Username,Password=_ref.Password,AuthParameters=_ref.AuthParameters;this.validationData=ValidationData||[],this.authParameters=AuthParameters||[],this.username=Username,this.password=Password}return AuthenticationDetails.prototype.getUsername=function getUsername(){return this.username},AuthenticationDetails.prototype.getPassword=function getPassword(){return this.password},AuthenticationDetails.prototype.getValidationData=function getValidationData(){return this.validationData},AuthenticationDetails.prototype.getAuthParameters=function getAuthParameters(){return this.authParameters},AuthenticationDetails}();exports.default=AuthenticationDetails},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _cognitoidentityserviceprovider,_cognitoidentityserviceprovider2=_interopRequireDefault(__webpack_require__(13)),_CognitoUser,_CognitoUser2=_interopRequireDefault(__webpack_require__(8)),_StorageHelper,_StorageHelper2=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CognitoUserPool=function(){function CognitoUserPool(data){_classCallCheck(this,CognitoUserPool);var _ref=data||{},UserPoolId=_ref.UserPoolId,ClientId=_ref.ClientId,endpoint=_ref.endpoint,AdvancedSecurityDataCollectionFlag=_ref.AdvancedSecurityDataCollectionFlag;if(!UserPoolId||!ClientId)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(UserPoolId))throw new Error("Invalid UserPoolId format.");var region=UserPoolId.split("_")[0];this.userPoolId=UserPoolId,this.clientId=ClientId,this.client=new _cognitoidentityserviceprovider2.default({apiVersion:"2016-04-19",region:region,endpoint:endpoint}),this.advancedSecurityDataCollectionFlag=!1!==AdvancedSecurityDataCollectionFlag,this.storage=data.Storage||(new _StorageHelper2.default).getStorage()}return CognitoUserPool.prototype.getUserPoolId=function getUserPoolId(){return this.userPoolId},CognitoUserPool.prototype.getClientId=function getClientId(){return this.clientId},CognitoUserPool.prototype.signUp=function signUp(username,password,userAttributes,validationData,callback){var _this=this,jsonReq={ClientId:this.clientId,Username:username,Password:password,UserAttributes:userAttributes,ValidationData:validationData};this.getUserContextData(username)&&(jsonReq.UserContextData=this.getUserContextData(username)),this.client.makeUnauthenticatedRequest("signUp",jsonReq,function(err,data){if(err)return callback(err,null);var cognitoUser={Username:username,Pool:_this,Storage:_this.storage},returnData={user:new _CognitoUser2.default(cognitoUser),userConfirmed:data.UserConfirmed,userSub:data.UserSub};return callback(null,returnData)})},CognitoUserPool.prototype.getCurrentUser=function getCurrentUser(){var lastUserKey="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",lastAuthUser=this.storage.getItem(lastUserKey);if(lastAuthUser){var cognitoUser={Username:lastAuthUser,Pool:this,Storage:this.storage};return new _CognitoUser2.default(cognitoUser)}return null},CognitoUserPool.prototype.getUserContextData=function getUserContextData(username){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var amazonCognitoAdvancedSecurityDataConst=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var advancedSecurityData=amazonCognitoAdvancedSecurityDataConst.getData(username,this.userPoolId,this.clientId),userContextData;if(advancedSecurityData)return{EncodedData:advancedSecurityData}}return{}}},CognitoUserPool}();exports.default=CognitoUserPool},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _jsCookie,Cookies=_interopRequireWildcard(__webpack_require__(18));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CookieStorage=function(){function CookieStorage(data){_classCallCheck(this,CookieStorage),this.domain=data.domain,data.path?this.path=data.path:this.path="/",Object.prototype.hasOwnProperty.call(data,"expires")?this.expires=data.expires:this.expires=365,Object.prototype.hasOwnProperty.call(data,"secure")?this.secure=data.secure:this.secure=!0}return CookieStorage.prototype.setItem=function setItem(key,value){return Cookies.set(key,value,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),Cookies.get(key)},CookieStorage.prototype.getItem=function getItem(key){return Cookies.get(key)},CookieStorage.prototype.removeItem=function removeItem(key){return Cookies.remove(key,{path:this.path,domain:this.domain,secure:this.secure})},CookieStorage.prototype.clear=function clear(){var cookies=Cookies.get(),index=void 0;for(index=0;index<cookies.length;++index)Cookies.remove(cookies[index]);return{}},CookieStorage}();exports.default=CookieStorage},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _AuthenticationDetails=__webpack_require__(14);Object.defineProperty(exports,"AuthenticationDetails",{enumerable:!0,get:function get(){return _interopRequireDefault(_AuthenticationDetails).default}});var _AuthenticationHelper=__webpack_require__(2);Object.defineProperty(exports,"AuthenticationHelper",{enumerable:!0,get:function get(){return _interopRequireDefault(_AuthenticationHelper).default}});var _CognitoAccessToken=__webpack_require__(4);Object.defineProperty(exports,"CognitoAccessToken",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoAccessToken).default}});var _CognitoIdToken=__webpack_require__(5);Object.defineProperty(exports,"CognitoIdToken",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoIdToken).default}});var _CognitoRefreshToken=__webpack_require__(7);Object.defineProperty(exports,"CognitoRefreshToken",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoRefreshToken).default}});var _CognitoUser=__webpack_require__(8);Object.defineProperty(exports,"CognitoUser",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoUser).default}});var _CognitoUserAttribute=__webpack_require__(9);Object.defineProperty(exports,"CognitoUserAttribute",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoUserAttribute).default}});var _CognitoUserPool=__webpack_require__(15);Object.defineProperty(exports,"CognitoUserPool",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoUserPool).default}});var _CognitoUserSession=__webpack_require__(10);Object.defineProperty(exports,"CognitoUserSession",{enumerable:!0,get:function get(){return _interopRequireDefault(_CognitoUserSession).default}});var _CookieStorage=__webpack_require__(16);Object.defineProperty(exports,"CookieStorage",{enumerable:!0,get:function get(){return _interopRequireDefault(_CookieStorage).default}});var _DateHelper=__webpack_require__(11);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"DateHelper",{enumerable:!0,get:function get(){return _interopRequireDefault(_DateHelper).default}}),"undefined"!=typeof window&&!window.crypto&&window.msCrypto&&(window.crypto=window.msCrypto)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){var registeredInModuleLoader=!1;if(void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),registeredInModuleLoader=!0,module.exports=factory(),!(registeredInModuleLoader=!0)){var OldCookies=window.Cookies,api=window.Cookies=factory();api.noConflict=function(){return window.Cookies=OldCookies,api}}}(function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function init(converter){function api(key,value,attributes){var result;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(attributes=extend({path:"/"},api.defaults,attributes)).expires){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+864e5*attributes.expires),attributes.expires=expires}attributes.expires=attributes.expires?attributes.expires.toUTCString():"";try{result=JSON.stringify(value),/^[\{\[]/.test(result)&&(value=result)}catch(e){}value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=(key=(key=encodeURIComponent(String(key))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes)attributes[attributeName]&&(stringifiedAttributes+="; "+attributeName,!0!==attributes[attributeName]&&(stringifiedAttributes+="="+attributes[attributeName]));return document.cookie=key+"="+value+stringifiedAttributes}key||(result={});for(var cookies=document.cookie?document.cookie.split("; "):[],rdecode=/(%[0-9A-Z]{2})+/g,i=0;i<cookies.length;i++){var parts=cookies[i].split("="),cookie=parts.slice(1).join("=");this.json||'"'!==cookie.charAt(0)||(cookie=cookie.slice(1,-1));try{var name=parts[0].replace(rdecode,decodeURIComponent);if(cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent),this.json)try{cookie=JSON.parse(cookie)}catch(e){}if(key===name){result=cookie;break}key||(result[name]=cookie)}catch(e){}}return result}}return api.set=api,api.get=function(key){return api.call(api,key)},api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))},api.defaults={},api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))},api.withConverter=init,api}return init(function(){})})}])});